<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèïÔ∏è</text></svg>" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistema de Gesti√≥n Boy Scout - Grupo Scout Lima 12</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
    <link rel="stylesheet" href="assets/css/main.css">
    
    <style>
        .header-modern {
            background: linear-gradient(135deg, #2E7D4A 0%, #4CAF50 100%);
            color: white;
            padding: 0;
        }
        .navbar {
            padding: 1rem 0;
        }
        .logo-modern {
            display: flex;
            align-items: center;
            gap: 1rem;
            color: white;
        }
        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #F4A460 0%, #FFD54F 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        .hero-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 4rem 0;
        }
        .form-section {
            background: #f8f9fa;
            padding: 2rem 0;
        }
        .form-container {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            max-width: 900px;
            margin: 0 auto;
        }
        
        /* Progress Steps */
        .progress-steps-horizontal {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 2rem;
            position: relative;
        }
        
        .step-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            position: relative;
            z-index: 2;
        }
        
        .step-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #e9ecef;
            color: #6c757d;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }
        
        .step-item.active .step-circle {
            background: #2E7D4A;
            color: white;
            border-color: #4CAF50;
            box-shadow: 0 4px 12px rgba(46, 125, 74, 0.3);
        }
        
        .step-item.completed .step-circle {
            background: #28a745;
            color: white;
        }
        
        .step-info h6 {
            margin: 0;
            font-weight: 600;
            color: #495057;
        }
        
        .step-item.active .step-info h6 {
            color: #2E7D4A;
        }
        
        .step-info small {
            color: #6c757d;
            font-size: 0.75rem;
        }
        
        .step-line {
            flex: 1;
            height: 3px;
            background: #e9ecef;
            margin: 0 1rem;
            margin-top: -30px;
            position: relative;
            z-index: 1;
        }
        
        .step-line.completed {
            background: #28a745;
        }
        
        /* Step Content */
        .step-content {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }
        
        .step-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .step-header {
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 1rem;
        }
        
        /* Age Display */
        .age-display {
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .age-display.has-age {
            border-color: #2E7D4A;
            background: linear-gradient(135deg, #f8f9fa, #e8f5e9);
        }
        
        /* Rama Badge */
        .rama-badge {
            padding: 2rem;
        }
        
        .rama-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
        }
        
        .rama-manada .rama-icon { background: linear-gradient(135deg, #8BC34A, #689F38); }
        .rama-tropa .rama-icon { background: linear-gradient(135deg, #FF9800, #F57C00); }
        .rama-caminante .rama-icon { background: linear-gradient(135deg, #2196F3, #1976D2); }
        .rama-clan .rama-icon { background: linear-gradient(135deg, #9C27B0, #7B1FA2); }
        .rama-default .rama-icon { background: #6c757d; }
        
        .rama-name {
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .rama-description {
            color: #6c757d;
            margin: 0;
        }
        
        /* Form Validation */
        .form-control:invalid:not(:placeholder-shown) {
            border-color: #dc3545;
        }
        
        .form-control:valid:not(:placeholder-shown) {
            border-color: #28a745;
        }
        
        .was-validated .form-control:invalid {
            border-color: #dc3545;
        }
        
        .was-validated .form-control:valid {
            border-color: #28a745;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .progress-steps-horizontal {
                flex-direction: column;
            }
            
            .step-line {
                width: 3px;
                height: 40px;
                margin: 0.5rem 0;
            }
            
            .form-container {
                margin: 0 1rem;
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header-modern">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <div class="logo-modern">
                    <div class="logo-icon">
                        <i class="fas fa-campground"></i>
                    </div>
                    <div>
                        <h3 class="mb-0">Boy Scout</h3>
                        <small>Grupo Lima 12</small>
                    </div>
                </div>
                
                <div class="navbar-nav ms-auto">
                    <a class="nav-link text-white" href="#registro">
                        <i class="fas fa-user-plus me-2"></i>Registro
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container text-center">
            <h1 class="display-4 fw-bold text-primary mb-3">
                Registro de <span class="text-success">Boy Scout</span>
            </h1>
            <p class="lead text-muted mb-4">
                Completa todos los datos para registrar un nuevo miembro de nuestro grupo scout
            </p>
        </div>
    </section>

    <!-- Formulario -->
    <section class="form-section">
        <div class="container">
            <div class="form-container">
                <!-- Progress Steps -->
                <div class="progress-wrapper mb-4">
                    <div class="text-center mb-4">
                        <h2 class="text-primary">Proceso de Registro</h2>
                        <p class="text-muted">Completa la informaci√≥n en 3 simples pasos</p>
                    </div>
                    
                    <div class="progress-steps-horizontal">
                        <div class="step-item active" data-step="1">
                            <div class="step-circle">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="step-info">
                                <h6>Datos Personales</h6>
                                <small>Informaci√≥n b√°sica</small>
                            </div>
                        </div>
                        <div class="step-line"></div>
                        <div class="step-item" data-step="2">
                            <div class="step-circle">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="step-info">
                                <h6>Datos Familiares</h6>
                                <small>Contacto de emergencia</small>
                            </div>
                        </div>
                        <div class="step-line"></div>
                        <div class="step-item" data-step="3">
                            <div class="step-circle">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="step-info">
                                <h6>Confirmaci√≥n</h6>
                                <small>Revisar y enviar</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <form id="registrationForm">
                    <!-- Paso 1: Datos Personales -->
                    <div class="step-content active" id="step1">
                        <div class="step-header mb-4">
                            <h3 class="text-primary">
                                <i class="fas fa-user me-2"></i>
                                Datos Personales
                            </h3>
                            <p class="text-muted">Informaci√≥n b√°sica del scout</p>
                        </div>
                        
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="nombres" class="form-label fw-semibold">
                                    Nombres <span class="text-danger">*</span>
                                </label>
                                <input type="text" class="form-control" id="nombres" name="nombres" required>
                                <div class="invalid-feedback">Por favor ingresa los nombres.</div>
                            </div>
                            <div class="col-md-6">
                                <label for="apellidos" class="form-label fw-semibold">
                                    Apellidos <span class="text-danger">*</span>
                                </label>
                                <input type="text" class="form-control" id="apellidos" name="apellidos" required>
                                <div class="invalid-feedback">Por favor ingresa los apellidos.</div>
                            </div>
                            <div class="col-md-6">
                                <label for="fechaNacimiento" class="form-label fw-semibold">
                                    Fecha de Nacimiento <span class="text-danger">*</span>
                                </label>
                                <input type="date" class="form-control" id="fechaNacimiento" name="fechaNacimiento" required>
                                <div class="invalid-feedback">Por favor selecciona la fecha de nacimiento.</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-semibold">Edad Calculada</label>
                                <div class="age-display p-3 bg-light rounded">
                                    <div class="d-flex align-items-center">
                                        <div class="age-icon me-3">
                                            <i class="fas fa-birthday-cake text-primary fs-4"></i>
                                        </div>
                                        <div>
                                            <div class="age-number fs-4 fw-bold text-primary" id="edadNumero">--</div>
                                            <small class="text-muted">a√±os</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="tipoDocumento" class="form-label fw-semibold">
                                    Tipo de Documento <span class="text-danger">*</span>
                                </label>
                                <select class="form-select" id="tipoDocumento" name="tipoDocumento" required>
                                    <option value="">Seleccionar...</option>
                                    <option value="dni">DNI</option>
                                    <option value="carnet">Carnet de Extranjer√≠a</option>
                                    <option value="pasaporte">Pasaporte</option>
                                </select>
                                <div class="invalid-feedback">Por favor selecciona el tipo de documento.</div>
                            </div>
                            <div class="col-md-6">
                                <label for="numeroDocumento" class="form-label fw-semibold">
                                    N√∫mero de Documento <span class="text-danger">*</span>
                                </label>
                                <input type="text" class="form-control" id="numeroDocumento" name="numeroDocumento" required>
                                <div class="invalid-feedback">Por favor ingresa el n√∫mero de documento.</div>
                            </div>
                            <div class="col-md-6">
                                <label for="sexo" class="form-label fw-semibold">
                                    Sexo <span class="text-danger">*</span>
                                </label>
                                <select class="form-select" id="sexo" name="sexo" required>
                                    <option value="">Seleccionar...</option>
                                    <option value="masculino">Masculino</option>
                                    <option value="femenino">Femenino</option>
                                </select>
                                <div class="invalid-feedback">Por favor selecciona el sexo.</div>
                            </div>
                            <div class="col-md-6">
                                <label for="telefono" class="form-label fw-semibold">
                                    Tel√©fono/Celular
                                </label>
                                <input type="tel" class="form-control" id="telefono" name="telefono" placeholder="999 999 999">
                            </div>
                            <div class="col-12">
                                <label for="direccion" class="form-label fw-semibold">
                                    Direcci√≥n <span class="text-danger">*</span>
                                </label>
                                <textarea class="form-control" id="direccion" name="direccion" rows="2" placeholder="Ingresa la direcci√≥n completa" required></textarea>
                                <div class="invalid-feedback">Por favor ingresa la direcci√≥n.</div>
                            </div>
                            <div class="col-md-4">
                                <label for="departamento" class="form-label fw-semibold">
                                    Departamento <span class="text-danger">*</span>
                                </label>
                                <select class="form-select" id="departamento" name="departamento" required>
                                    <option value="">Seleccionar...</option>
                                    <option value="amazonas">Amazonas</option>
                                    <option value="ancash">√Åncash</option>
                                    <option value="apurimac">Apur√≠mac</option>
                                    <option value="arequipa">Arequipa</option>
                                    <option value="ayacucho">Ayacucho</option>
                                    <option value="cajamarca">Cajamarca</option>
                                    <option value="callao">Callao</option>
                                    <option value="cusco">Cusco</option>
                                    <option value="huancavelica">Huancavelica</option>
                                    <option value="huanuco">Hu√°nuco</option>
                                    <option value="ica">Ica</option>
                                    <option value="junin">Jun√≠n</option>
                                    <option value="la_libertad">La Libertad</option>
                                    <option value="lambayeque">Lambayeque</option>
                                    <option value="lima">Lima</option>
                                    <option value="loreto">Loreto</option>
                                    <option value="madre_de_dios">Madre de Dios</option>
                                    <option value="moquegua">Moquegua</option>
                                    <option value="pasco">Pasco</option>
                                    <option value="piura">Piura</option>
                                    <option value="puno">Puno</option>
                                    <option value="san_martin">San Mart√≠n</option>
                                    <option value="tacna">Tacna</option>
                                    <option value="tumbes">Tumbes</option>
                                    <option value="ucayali">Ucayali</option>
                                </select>
                                <div class="invalid-feedback">Por favor selecciona el departamento.</div>
                            </div>
                            <div class="col-md-4">
                                <label for="provincia" class="form-label fw-semibold">
                                    Provincia <span class="text-danger">*</span>
                                </label>
                                <select class="form-select" id="provincia" name="provincia" required disabled>
                                    <option value="">Seleccionar departamento primero</option>
                                </select>
                                <div class="invalid-feedback">Por favor selecciona la provincia.</div>
                            </div>
                            <div class="col-md-4">
                                <label for="distrito" class="form-label fw-semibold">
                                    Distrito <span class="text-danger">*</span>
                                </label>
                                <select class="form-select" id="distrito" name="distrito" required disabled>
                                    <option value="">Seleccionar provincia primero</option>
                                </select>
                                <div class="invalid-feedback">Por favor selecciona el distrito.</div>
                            </div>
                            <div class="col-md-6">
                                <label for="email" class="form-label fw-semibold">
                                    Correo Electr√≥nico
                                </label>
                                <input type="email" class="form-control" id="email" name="email" placeholder="ejemplo@correo.com">
                                <small class="form-text text-muted">Opcional - Para comunicaciones del grupo scout</small>
                            </div>
                            <div class="col-md-6">
                                <label for="foto" class="form-label fw-semibold">
                                    Foto del Scout
                                </label>
                                <input type="file" class="form-control" id="foto" name="foto" accept="image/*">
                                <small class="form-text text-muted">Opcional - Formatos: JPG, PNG, GIF (m√°x. 5MB)</small>
                                <div class="photo-preview mt-2" id="photoPreview" style="display: none;">
                                    <img id="previewImg" src="" alt="Vista previa" class="img-thumbnail" style="max-width: 150px; max-height: 150px;">
                                    <div class="mt-1">
                                        <button type="button" class="btn btn-sm btn-outline-danger" onclick="removePhoto()">
                                            <i class="fas fa-trash me-1"></i>Eliminar foto
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-flex justify-content-end mt-4">
                            <button type="button" class="btn btn-primary btn-lg px-4" onclick="nextStep()">
                                Siguiente
                                <i class="fas fa-arrow-right ms-2"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Paso 2: Datos Familiares -->
                    <div class="step-content" id="step2">
                        <div class="step-header mb-4">
                            <h3 class="text-primary">
                                <i class="fas fa-users me-2"></i>
                                Datos del Tutor/Familiar
                            </h3>
                            <p class="text-muted">Informaci√≥n del contacto de emergencia</p>
                        </div>
                        
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="nombreTutor" class="form-label fw-semibold">
                                    Nombre Completo del Tutor <span class="text-danger">*</span>
                                </label>
                                <input type="text" class="form-control" id="nombreTutor" name="nombreTutor" required>
                                <div class="invalid-feedback">Por favor ingresa el nombre del tutor.</div>
                            </div>
                            <div class="col-md-6">
                                <label for="parentesco" class="form-label fw-semibold">
                                    Parentesco <span class="text-danger">*</span>
                                </label>
                                <select class="form-select" id="parentesco" name="parentesco" required>
                                    <option value="">Seleccionar...</option>
                                    <option value="padre">Padre</option>
                                    <option value="madre">Madre</option>
                                    <option value="tutor">Tutor Legal</option>
                                    <option value="abuelo">Abuelo/a</option>
                                    <option value="tio">T√≠o/a</option>
                                    <option value="hermano">Hermano/a Mayor</option>
                                    <option value="otro">Otro</option>
                                </select>
                                <div class="invalid-feedback">Por favor selecciona el parentesco.</div>
                            </div>
                            <div class="col-md-6">
                                <label for="telefonoTutor" class="form-label fw-semibold">
                                    Tel√©fono del Tutor <span class="text-danger">*</span>
                                </label>
                                <input type="tel" class="form-control" id="telefonoTutor" name="telefonoTutor" placeholder="999 999 999" required>
                                <div class="invalid-feedback">Por favor ingresa el tel√©fono del tutor.</div>
                            </div>
                            <div class="col-md-6">
                                <label for="emailTutor" class="form-label fw-semibold">
                                    Email del Tutor
                                </label>
                                <input type="email" class="form-control" id="emailTutor" name="emailTutor" placeholder="ejemplo@correo.com">
                                <small class="form-text text-muted">Para recibir informaci√≥n del grupo scout</small>
                            </div>
                        </div>
                        
                        <div class="d-flex justify-content-between mt-4">
                            <button type="button" class="btn btn-outline-secondary btn-lg px-4" onclick="prevStep()">
                                <i class="fas fa-arrow-left me-2"></i>
                                Anterior
                            </button>
                            <button type="button" class="btn btn-primary btn-lg px-4" onclick="nextStep()">
                                Siguiente
                                <i class="fas fa-arrow-right ms-2"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Paso 3: Confirmaci√≥n -->
                    <div class="step-content" id="step3">
                        <div class="step-header mb-4">
                            <h3 class="text-success">
                                <i class="fas fa-check-circle me-2"></i>
                                Confirmaci√≥n y Rama Scout
                            </h3>
                            <p class="text-muted">Revisar informaci√≥n y asignaci√≥n de rama</p>
                        </div>
                        
                        <!-- Resumen de Datos -->
                        <div class="card mb-4">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">
                                    <i class="fas fa-user me-2"></i>
                                    Resumen de Datos Personales
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p><strong>Nombre:</strong> <span id="resumenNombre">--</span></p>
                                        <p><strong>Documento:</strong> <span id="resumenDocumento">--</span></p>
                                        <p><strong>Edad:</strong> <span id="resumenEdad">--</span></p>
                                    </div>
                                    <div class="col-md-6">
                                        <p><strong>Sexo:</strong> <span id="resumenSexo">--</span></p>
                                        <p><strong>Tel√©fono:</strong> <span id="resumenTelefono">--</span></p>
                                        <p><strong>Tutor:</strong> <span id="resumenTutor">--</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Rama Asignada -->
                        <div class="card mb-4">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">
                                    <i class="fas fa-sitemap me-2"></i>
                                    Rama Scout Asignada
                                </h5>
                            </div>
                            <div class="card-body text-center">
                                <div id="ramaDisplay" class="rama-badge">
                                    <div class="rama-icon">
                                        <i class="fas fa-question"></i>
                                    </div>
                                    <h4 class="rama-name">Sin asignar</h4>
                                    <p class="rama-description">Ingresa la fecha de nacimiento</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-flex justify-content-between mt-4">
                            <button type="button" class="btn btn-outline-secondary btn-lg px-4" onclick="prevStep()">
                                <i class="fas fa-arrow-left me-2"></i>
                                Anterior
                            </button>
                            <button type="submit" class="btn btn-success btn-lg px-5">
                                <i class="fas fa-save me-2"></i>
                                Registrar Scout
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- JavaScript b√°sico para funcionalidad -->
    <script>
        let currentStep = 1;
        const totalSteps = 3;
        
        // Navegaci√≥n entre pasos
        function nextStep() {
            if (validateCurrentStep()) {
                if (currentStep < totalSteps) {
                    showStep(currentStep + 1);
                }
            }
        }
        
        function prevStep() {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            }
        }
        
        function showStep(step) {
            // Ocultar paso actual
            document.querySelector(`#step${currentStep}`).classList.remove('active');
            document.querySelector(`.step-item[data-step="${currentStep}"]`).classList.remove('active');
            
            // Marcar pasos completados
            if (step > currentStep) {
                document.querySelector(`.step-item[data-step="${currentStep}"]`).classList.add('completed');
                const stepLines = document.querySelectorAll('.step-line');
                if (stepLines[currentStep - 1]) {
                    stepLines[currentStep - 1].classList.add('completed');
                }
            }
            
            // Mostrar nuevo paso
            currentStep = step;
            document.querySelector(`#step${currentStep}`).classList.add('active');
            document.querySelector(`.step-item[data-step="${currentStep}"]`).classList.add('active');
            
            // Actualizar resumen si estamos en el paso 3
            if (currentStep === 3) {
                updateSummary();
            }
        }
        
        // Validaci√≥n de pasos
        function validateCurrentStep() {
            const currentStepElement = document.querySelector(`#step${currentStep}`);
            const requiredFields = currentStepElement.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.classList.add('is-invalid');
                    isValid = false;
                } else {
                    field.classList.remove('is-invalid');
                    field.classList.add('is-valid');
                }
            });
            
            if (!isValid) {
                alert('Por favor completa todos los campos obligatorios antes de continuar.');
            }
            
            return isValid;
        }
        
        // C√°lculo de edad autom√°tico
        document.getElementById('fechaNacimiento').addEventListener('change', function() {
            const fechaNac = new Date(this.value);
            const hoy = new Date();
            let edad = hoy.getFullYear() - fechaNac.getFullYear();
            const mes = hoy.getMonth() - fechaNac.getMonth();
            
            if (mes < 0 || (mes === 0 && hoy.getDate() < fechaNac.getDate())) {
                edad--;
            }
            
            // Actualizar display de edad
            document.getElementById('edadNumero').textContent = edad;
            const ageDisplay = document.querySelector('.age-display');
            ageDisplay.classList.add('has-age');
            
            // Asignar rama autom√°ticamente
            updateRamaDisplay(edad);
        });
        
        function updateRamaDisplay(edad) {
            const ramaDisplay = document.getElementById('ramaDisplay');
            let ramaInfo = { clase: 'default', icono: 'question', nombre: 'Sin asignar', descripcion: 'Edad fuera del rango scout' };
            
            if (edad >= 7 && edad <= 10) {
                ramaInfo = { clase: 'manada', icono: 'paw', nombre: 'Manada', descripcion: 'Lobatos y Lobeznas (7-10 a√±os)' };
            } else if (edad >= 11 && edad <= 14) {
                ramaInfo = { clase: 'tropa', icono: 'campground', nombre: 'Tropa Scout', descripcion: 'Scouts (11-14 a√±os)' };
            } else if (edad >= 15 && edad <= 17) {
                ramaInfo = { clase: 'caminante', icono: 'hiking', nombre: 'Caminantes', descripcion: 'Rovers/Rangers (15-17 a√±os)' };
            } else if (edad >= 18 && edad <= 21) {
                ramaInfo = { clase: 'clan', icono: 'mountain', nombre: 'Clan Rover', descripcion: 'Rovers (18-21 a√±os)' };
            }
            
            ramaDisplay.className = `rama-badge rama-${ramaInfo.clase}`;
            ramaDisplay.querySelector('.rama-icon i').className = `fas fa-${ramaInfo.icono}`;
            ramaDisplay.querySelector('.rama-name').textContent = ramaInfo.nombre;
            ramaDisplay.querySelector('.rama-description').textContent = ramaInfo.descripcion;
        }
        
        // Actualizar resumen en paso 3
        function updateSummary() {
            const formData = new FormData(document.getElementById('registrationForm'));
            
            document.getElementById('resumenNombre').textContent = 
                `${formData.get('nombres') || '--'} ${formData.get('apellidos') || '--'}`;
            document.getElementById('resumenDocumento').textContent = 
                `${(formData.get('tipoDocumento') || '').toUpperCase()}: ${formData.get('numeroDocumento') || '--'}`;
            document.getElementById('resumenEdad').textContent = 
                `${document.getElementById('edadNumero').textContent} a√±os`;
            document.getElementById('resumenSexo').textContent = 
                (formData.get('sexo') || '--').charAt(0).toUpperCase() + (formData.get('sexo') || '--').slice(1);
            document.getElementById('resumenTelefono').textContent = 
                formData.get('telefono') || 'No especificado';
            document.getElementById('resumenTutor').textContent = 
                `${formData.get('nombreTutor') || '--'} (${formData.get('parentesco') || '--'})`;
        }
        
        // Manejo del formulario
        document.getElementById('registrationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!validateCurrentStep()) {
                return;
            }
            
            // Recopilar todos los datos
            const formData = new FormData(this);
            const data = {};
            
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            // Agregar informaci√≥n calculada
            data.edad = document.getElementById('edadNumero').textContent;
            data.rama = document.querySelector('.rama-name').textContent;
            
            // Mostrar confirmaci√≥n
            alert('¬°Scout registrado exitosamente! Los datos se han guardado correctamente.');
            console.log('Datos del scout registrado:', data);
            
            // Opcional: limpiar formulario y volver al paso 1
            // this.reset();
            // showStep(1);
        });
        
        // Validaci√≥n en tiempo real
        document.querySelectorAll('input, select').forEach(field => {
            field.addEventListener('blur', function() {
                if (this.hasAttribute('required')) {
                    if (!this.value.trim()) {
                        this.classList.add('is-invalid');
                        this.classList.remove('is-valid');
                    } else {
                        this.classList.remove('is-invalid');
                        this.classList.add('is-valid');
                    }
                }
            });
        });
        
        // Datos de ubicaci√≥n para Per√∫
        const ubicacionData = {
            lima: {
                nombre: "Lima",
                provincias: {
                    lima: {
                        nombre: "Lima",
                        distritos: ["Anc√≥n", "Ate", "Barranco", "Bre√±a", "Carabayllo", "Chaclacayo", "Chorrillos", "Cieneguilla", "Comas", "El Agustino", "Independencia", "Jes√∫s Mar√≠a", "La Molina", "La Victoria", "Lince", "Los Olivos", "Lurigancho", "Lur√≠n", "Magdalena del Mar", "Miraflores", "Pachac√°mac", "Pucusana", "Pueblo Libre", "Puente Piedra", "Punta Hermosa", "Punta Negra", "R√≠mac", "San Bartolo", "San Borja", "San Isidro", "San Juan de Lurigancho", "San Juan de Miraflores", "San Luis", "San Mart√≠n de Porres", "San Miguel", "Santa Anita", "Santa Mar√≠a del Mar", "Santa Rosa", "Santiago de Surco", "Surquillo", "Villa El Salvador", "Villa Mar√≠a del Triunfo"]
                    },
                    barranca: {
                        nombre: "Barranca",
                        distritos: ["Barranca", "Paramonga", "Pativilca", "Supe", "Supe Puerto"]
                    },
                    cajatambo: {
                        nombre: "Cajatambo",
                        distritos: ["Cajatambo", "Copa", "Gorgor", "Huancap√≥n", "Man√°s"]
                    },
                    canta: {
                        nombre: "Canta",
                        distritos: ["Arahuay", "Canta", "Huamantanga", "Huaros", "Lachaqui", "San Buenaventura", "Santa Rosa de Quives"]
                    },
                    ca√±ete: {
                        nombre: "Ca√±ete",
                        distritos: ["Asia", "Calango", "Cerro Azul", "Chilca", "Coayllo", "Imperial", "Lunahuan√°", "Mala", "Nuevo Imperial", "Pacar√°n", "Quilman√°", "San Antonio", "San Luis", "San Vicente de Ca√±ete", "Santa Cruz de Flores", "Z√∫√±iga"]
                    },
                    huaral: {
                        nombre: "Huaral",
                        distritos: ["Atavillos Alto", "Atavillos Bajo", "Aucallama", "Chancay", "Huaral", "Ihuar√≠", "Lampi√°n", "Pacaraos", "San Miguel de Acos", "Santa Cruz de Andamarca", "Sumbilca", "Veintisiete de Noviembre"]
                    },
                    huarochiri: {
                        nombre: "Huarochir√≠",
                        distritos: ["Antioquia", "Callahuanca", "Carampoma", "Chicla", "Cuenca", "Huachupampa", "Huanza", "Huarochir√≠", "Lahuaytambo", "Langa", "Laraos", "Mariatana", "Matucana", "Ricardo Palma", "San Andr√©s de Tupicocha", "San Antonio", "San Bartolom√©", "San Dami√°n", "San Juan de Iris", "San Juan de Tantaranche", "San Lorenzo de Quinti", "San Mateo", "San Mateo de Otao", "San Pedro de Casta", "San Pedro de Huancayre", "Sangallaya", "Santa Cruz de Cocachacra", "Santa Eulalia", "Santiago de Anchucaya", "Santiago de Tuna", "Santo Domingo de los Olleros", "Surco"]
                    },
                    huaura: {
                        nombre: "Huaura",
                        distritos: ["√Åmbar", "Caleta de Carqu√≠n", "Checras", "Huacho", "Hualmay", "Huaura", "Leoncio Prado", "Paccho", "Santa Leonor", "Santa Mar√≠a", "Say√°n", "Vegueta"]
                    },
                    oyon: {
                        nombre: "Oy√≥n",
                        distritos: ["Andajes", "Caujul", "Cochamarca", "Navan", "Oy√≥n", "Pachangara"]
                    },
                    yauyos: {
                        nombre: "Yauyos",
                        distritos: ["Alis", "Allauca", "Ayaviri", "Az√°ngaro", "Cacra", "Carania", "Catahuasi", "Chocos", "Cochas", "Colonia", "Hongos", "Huampara", "Huancaya", "Huangascar", "Huant√°n", "Hua√±ec", "Laraos", "Lincha", "Madean", "Miraflores", "Omas", "Putinza", "Quinches", "Quinocay", "San Joaqu√≠n", "San Pedro de Pilas", "Tanta", "Tauripampa", "Tomas", "Tupe", "Vi√±ac", "Vitis", "Yauyos"]
                    }
                }
            },
            callao: {
                nombre: "Callao",
                provincias: {
                    callao: {
                        nombre: "Callao",
                        distritos: ["Bellavista", "Callao", "Carmen de la Legua Reynoso", "La Perla", "La Punta", "Mi Per√∫", "Ventanilla"]
                    }
                }
            },
            arequipa: {
                nombre: "Arequipa",
                provincias: {
                    arequipa: {
                        nombre: "Arequipa",
                        distritos: ["Alto Selva Alegre", "Arequipa", "Cayma", "Cerro Colorado", "Characato", "Chiguata", "Jacobo Hunter", "Jos√© Luis Bustamante y Rivero", "Mariano Melgar", "Miraflores", "Mollebaya", "Paucarpata", "Pocsi", "Polobaya", "Queque√±a", "Saband√≠a", "Sachaca", "San Juan de Siguas", "San Juan de Tarucani", "Santa Isabel de Siguas", "Santa Rita de Siguas", "Socabaya", "Tiabaya", "Uchumayo", "Vitor", "Yanahuara", "Yarabamba", "Yura"]
                    }
                }
            }
        };
        
        // Manejo de cascada de ubicaci√≥n
        document.getElementById('departamento').addEventListener('change', function() {
            const provinciaSelect = document.getElementById('provincia');
            const distritoSelect = document.getElementById('distrito');
            
            // Limpiar provincia y distrito
            provinciaSelect.innerHTML = '<option value="">Seleccionar...</option>';
            distritoSelect.innerHTML = '<option value="">Seleccionar provincia primero</option>';
            distritoSelect.disabled = true;
            
            const departamento = this.value;
            
            if (departamento && ubicacionData[departamento]) {
                provinciaSelect.disabled = false;
                
                // Agregar provincias del departamento seleccionado
                Object.keys(ubicacionData[departamento].provincias).forEach(provinciaKey => {
                    const provincia = ubicacionData[departamento].provincias[provinciaKey];
                    const option = document.createElement('option');
                    option.value = provinciaKey;
                    option.textContent = provincia.nombre;
                    provinciaSelect.appendChild(option);
                });
            } else {
                provinciaSelect.disabled = true;
                provinciaSelect.innerHTML = '<option value="">Seleccionar departamento primero</option>';
            }
        });
        
        document.getElementById('provincia').addEventListener('change', function() {
            const distritoSelect = document.getElementById('distrito');
            const departamento = document.getElementById('departamento').value;
            const provincia = this.value;
            
            // Limpiar distrito
            distritoSelect.innerHTML = '<option value="">Seleccionar...</option>';
            
            if (departamento && provincia && ubicacionData[departamento] && ubicacionData[departamento].provincias[provincia]) {
                distritoSelect.disabled = false;
                
                // Agregar distritos de la provincia seleccionada
                const distritos = ubicacionData[departamento].provincias[provincia].distritos;
                distritos.forEach(distrito => {
                    const option = document.createElement('option');
                    option.value = distrito.toLowerCase().replace(/\s+/g, '_');
                    option.textContent = distrito;
                    distritoSelect.appendChild(option);
                });
            } else {
                distritoSelect.disabled = true;
                distritoSelect.innerHTML = '<option value="">Seleccionar provincia primero</option>';
            }
        });
        
        // Manejo de carga y vista previa de foto
        document.getElementById('foto').addEventListener('change', function(event) {
            const file = event.target.files[0];
            const photoPreview = document.getElementById('photoPreview');
            const previewImg = document.getElementById('previewImg');
            
            if (file) {
                // Validar tipo de archivo
                const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];
                if (!validTypes.includes(file.type)) {
                    alert('Por favor selecciona un archivo de imagen v√°lido (JPG, PNG, GIF)');
                    this.value = '';
                    return;
                }
                
                // Validar tama√±o (5MB m√°ximo)
                const maxSize = 5 * 1024 * 1024; // 5MB en bytes
                if (file.size > maxSize) {
                    alert('La imagen es demasiado grande. El tama√±o m√°ximo es 5MB.');
                    this.value = '';
                    return;
                }
                
                // Crear vista previa
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewImg.src = e.target.result;
                    photoPreview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            } else {
                photoPreview.style.display = 'none';
            }
        });
        
        // Funci√≥n para eliminar foto
        function removePhoto() {
            const fotoInput = document.getElementById('foto');
            const photoPreview = document.getElementById('photoPreview');
            
            fotoInput.value = '';
            photoPreview.style.display = 'none';
        }
    </script>
</body>
</html>
